# freshshell.com
#
# Examples:
#
#   fresh twe4ked/dotfiles shell/functions.sh
#   fresh jasoncodes/dotfiles aliases/rails.sh
#   fresh jasoncodes/dotfiles config/tmux.conf --file
#
# See http://freshshell.com/readme for documentation.

fresh freshshell/fresh bin/fresh --bin

# Config
fresh-options --file
  fresh config/\*
fresh-options

# prezto
fresh sorin-ionescu/prezto . --file=~/.zprezto/

# zpreztorc
fresh shell/zsh/zpreztorc --file=~/.zpreztorc

# zshrc
fresh-options --file=~/.zshrc --marker --ignore-missing
  # prezto
  fresh sorin-ionescu/prezto runcoms/zshrc
  # fresh
  fresh freshshell/fresh contrib/source-build.sh
  # other
  fresh shell/aliases
  fresh shell/zsh/zshrc
fresh-options

# zlogin
fresh-options --file=~/.zlogin --marker --ignore-missing
  # prezto
  fresh sorin-ionescu/prezto runcoms/zlogin
  # other
  fresh shell/zsh/zlogin
fresh-options

# zlogout
fresh-options --file=~/.zlogout --marker --ignore-missing
  # prezto
  fresh sorin-ionescu/prezto runcoms/zlogout
  # other
fresh-options

# zprofile
fresh-options --file=~/.zprofile --marker --ignore-missing
  # prezto
  fresh sorin-ionescu/prezto runcoms/zprofile
  # other
fresh-options

# zshenv
fresh-options --file=~/.zshenv --marker --ignore-missing
  # prezto
  fresh sorin-ionescu/prezto runcoms/zshenv
  # other
fresh-options

# # zsh-autosuggestions
# fresh tarruda/zsh-autosuggestions . --file=~/.zsh-autosuggestions/

# altercation/solarized
fresh altercation/solarized . --file=~/.solarized/

# Lokaltog/powerline-fonts
fresh Lokaltog/powerline-fonts . --file=~/.powerline-fonts/


fresh_after_build() {
  # Git submodules
  if [ -z "${updated_submodules+1}" ]; then
    cd ~/.fresh/source/sorin-ionescu/prezto/ && git pull && git submodule update --init --recursive
    export updated_submodules=0
  fi
  if [ "$updated_submodules" -eq 0 ]; then
    export updated_submodules=$[updated_submodules+1]
    ~/bin/fresh
  fi
  unset updated_submodules
}
